<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><link rel="preconnect" href="https://fonts.googleapis.com"/><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="true"/><link rel="apple-touch-icon" sizes="180x180" href="/favicon/apple-touch-icon.png"/><link rel="icon" type="image/png" sizes="32x32" href="/favicon/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/favicon/favicon-16x16.png"/><link rel="manifest" href="/favicon/site.webmanifest"/><link rel="mask-icon" href="/favicon/safari-pinned-tab.svg" color="#000000"/><link rel="shortcut icon" href="/favicon/favicon.ico"/><meta name="msapplication-TileColor" content="#000000"/><meta name="msapplication-config" content="/favicon/browserconfig.xml"/><meta name="theme-color" content="#000"/><link rel="alternate" type="application/rss+xml" href="/feed.xml"/><meta name="description" content="A blog on web development with React and Typescript."/><title>Filtering Unions in TypeScript</title><meta name="next-head-count" content="16"/><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin /><link rel="preload" href="/blog/_next/static/css/f2e8ce7a08454583.css" as="style"/><link rel="stylesheet" href="/blog/_next/static/css/f2e8ce7a08454583.css" data-n-g=""/><link rel="preload" href="/blog/_next/static/css/ff77306449b1897a.css" as="style"/><link rel="stylesheet" href="/blog/_next/static/css/ff77306449b1897a.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/blog/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/blog/_next/static/chunks/webpack-5f0cf5446be11543.js" defer=""></script><script src="/blog/_next/static/chunks/framework-ed62687b5581921b.js" defer=""></script><script src="/blog/_next/static/chunks/main-cb7b41c9cdc2a097.js" defer=""></script><script src="/blog/_next/static/chunks/pages/_app-f51201e12e7e4d94.js" defer=""></script><script src="/blog/_next/static/chunks/299-6b06e3596b88e631.js" defer=""></script><script src="/blog/_next/static/chunks/503-5f0d2c6f9d0a5f52.js" defer=""></script><script src="/blog/_next/static/chunks/pages/posts/%5Bslug%5D-80fde88d01873cd0.js" defer=""></script><script src="/blog/_next/static/L0pcDSaMYWakbUg_6Ti-7/_buildManifest.js" defer=""></script><script src="/blog/_next/static/L0pcDSaMYWakbUg_6Ti-7/_ssgManifest.js" defer=""></script><style data-href="https://fonts.googleapis.com/css2?family=Inter">@font-face{font-family:'Inter';font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/inter/v12/UcCO3FwrK3iLTeHuS_fvQtMwCp50KnMw2boKoduKmMEVuLyfMZs.woff) format('woff')}@font-face{font-family:'Inter';font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/inter/v12/UcCO3FwrK3iLTeHuS_fvQtMwCp50KnMw2boKoduKmMEVuLyfAZJhjp-Ek-_EeAmM.woff) format('woff');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Inter';font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/inter/v12/UcCO3FwrK3iLTeHuS_fvQtMwCp50KnMw2boKoduKmMEVuLyfAZthjp-Ek-_EeAmM.woff) format('woff');unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Inter';font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/inter/v12/UcCO3FwrK3iLTeHuS_fvQtMwCp50KnMw2boKoduKmMEVuLyfAZNhjp-Ek-_EeAmM.woff) format('woff');unicode-range:U+1F00-1FFF}@font-face{font-family:'Inter';font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/inter/v12/UcCO3FwrK3iLTeHuS_fvQtMwCp50KnMw2boKoduKmMEVuLyfAZxhjp-Ek-_EeAmM.woff) format('woff');unicode-range:U+0370-03FF}@font-face{font-family:'Inter';font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/inter/v12/UcCO3FwrK3iLTeHuS_fvQtMwCp50KnMw2boKoduKmMEVuLyfAZBhjp-Ek-_EeAmM.woff) format('woff');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Inter';font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/inter/v12/UcCO3FwrK3iLTeHuS_fvQtMwCp50KnMw2boKoduKmMEVuLyfAZFhjp-Ek-_EeAmM.woff) format('woff');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Inter';font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/inter/v12/UcCO3FwrK3iLTeHuS_fvQtMwCp50KnMw2boKoduKmMEVuLyfAZ9hjp-Ek-_EeA.woff) format('woff');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}</style></head><body><div id="__next"><div class="bg-gray-900"><div class="min-h-screen"><main><div class="container mx-auto px-5"><h2 class="text-lg md:text-xl font-bold underline text-teal-500 mb-20 pt-8"><a class="hover:text-sky-400" href="/blog">Home</a></h2><article id="blog-post" class="mb-32"><div class="max-w-2xl mx-auto"><h1 class="text-pink-500 font-bold text-center text-6xl tracking-tighter leading-tight mx-auto md:text-left">Filtering Unions in TypeScript</h1><div class="mt-2 mb-6 text-lg text-white font-semibold"><div class="mb-1"><time dateTime="2023-03-24T20:00:00.000Z">March	25, 2023</time> |<!-- --> <span>Jithya Nanayakkara</span> |<!-- --> <span>3 min read</span></div><div><a class="text-base text-teal-500 underline hover:text-sky-400" href="#inject-comments-for-uterances">Jump to comments</a></div></div></div><section class="mx-auto max-w-md text-sm text-left text-gray-500 dark:text-gray-400 mb-2 rounded-lg"><h2 class="text-center font-semibold text-basis text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400 py-1.5 px-2.5">Table of Contents</h2><div></div></section><div class="max-w-2xl mx-auto text-gray-300"><div class="markdown-styles_markdown__8Ahqd"><p>Let&#x27;s say I have the following Union:</p>
<pre><div style="color:#d4d4d4;font-size:13px;text-shadow:none;font-family:Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;background:#1e1e1e"><code class="language-typescript" style="color:#9cdcfe;font-size:13px;text-shadow:none;font-family:Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none">type Cake =
    | { name: &quot;Nutella cheesecake&quot;; sugarLevel: &quot;low&quot; }
    | { name: &quot;Fairy cupcake&quot;; sugarLevel: &quot;medium&quot; }
    | { name: &quot;Strawberry shortcake&quot;; sugarLevel: &quot;high&quot; }
    | { name: &quot;Rainbow cake&quot;; sugarLevel: &quot;high&quot; };</code></div></pre>
<p>What if I want a new type, which is a union of all the names of cakes with a <code class="bg-slate-800 px-2">sugarLevel</code> of <code class="bg-slate-800 px-2">&quot;high&quot;</code>?</p>
<pre><div style="color:#d4d4d4;font-size:13px;text-shadow:none;font-family:Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;background:#1e1e1e"><code class="language-typescript" style="color:#9cdcfe;font-size:13px;text-shadow:none;font-family:Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none">type Breakfast = &quot;Strawberry shortcake&quot; | &quot;Rainbow cake&quot;;</code></div></pre>
<p>Without having to manually type out all the names which fit the criteria, we can achieve this instead by extracting the values from the <code class="bg-slate-800 px-2">Cake</code> type:</p>
<pre><div style="color:#d4d4d4;font-size:13px;text-shadow:none;font-family:Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;background:#1e1e1e"><code class="language-typescript" style="color:#9cdcfe;font-size:13px;text-shadow:none;font-family:Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none">type Breakfast = {
    [CakeDescription in Cake as CakeDescription[&quot;name&quot;]]: CakeDescription[&quot;sugarLevel&quot;] extends &quot;high&quot;
        ? CakeDescription[&quot;name&quot;]
        : never;
}[Cake[&quot;name&quot;]];

// gives Breakfast = &quot;Strawberry shortcake&quot; | &quot;Rainbow cake&quot;</code></div></pre>
<p>Let&#x27;s breakdown what happens:</p>
<ol>
<li>First we need to create a new (temporary) object - that&#x27;s why the type opens with a <code class="bg-slate-800 px-2">{</code>. This object is mapping of <code class="bg-slate-800 px-2">Cake[&quot;name&quot;]: Cake[&quot;name&quot;] | never</code>. <strong>Note:</strong> <code class="bg-slate-800 px-2">Cake[&quot;name&quot;]</code> gives <code class="bg-slate-800 px-2">&quot;Nutella cheesecake&quot; | &quot;Fairy cupcake&quot; | &quot;Strawberry shortcake&quot; | &quot;Rainbow cake&quot;</code></li>
<li>We then need to iterate over every value in the <code class="bg-slate-800 px-2">Cake</code> union type. This is done using the <code class="bg-slate-800 px-2">[value in union]</code> syntax.</li>
<li>Every value we iterate over needs to be converted into a string, by indexing into the Cake object&#x27;s <code class="bg-slate-800 px-2">&quot;name&quot;</code> property. This is done using the <code class="bg-slate-800 px-2">as</code> syntax.</li>
<li>The previous step essentially created the key of the new object, now we need to associate it with a value. We still have access to the <code class="bg-slate-800 px-2">Cake</code> value (I&#x27;ve named it <code class="bg-slate-800 px-2">CakeDescription</code>) we&#x27;re iterating over, so we check whether the <code class="bg-slate-800 px-2">&quot;sugarLevel&quot;</code> equals <code class="bg-slate-800 px-2">&quot;high&quot;</code> via the <code class="bg-slate-800 px-2">extends</code> keyword.</li>
<li>If it does equal <code class="bg-slate-800 px-2">&quot;high&quot;</code> we return the name of the Cake, if not we return <code class="bg-slate-800 px-2">never</code>.</li>
<li>At the closing <code class="bg-slate-800 px-2">}</code>, a new object type is created. We can extract all its values by passing a union of all its keys as the index - we already know the keys, as it&#x27;s just <code class="bg-slate-800 px-2">Cake[&quot;name&quot;]</code>. Which is why it ends with <code class="bg-slate-800 px-2">}[Cake[&quot;name&quot;]];</code></li>
</ol></div></div><section><div id="inject-comments-for-uterances"></div></section></article></div></main></div><footer class="bg-slate-800"><div style="display:table" class="mx-auto"><ul class="list-none flex flex-row text-lg text-teal-500 underline font-semibold p-2"><li class="mr-4 max-w-md"><a href="https://github.com/jithyan" class="hover:text-sky-400 " target="_blank">Github</a></li><li class="mr-4 max-w-md"><a href="https://www.linkedin.com/in/jithyan/" class=" hover:text-sky-400 " target="_blank">LinkedIn</a></li><li class=""><a href="https://jithyan.github.io/resume/" class=" hover:text-sky-400" target="_blank">Resume</a></li></ul></div></footer></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"title":"Filtering Unions in TypeScript","date":"2023-03-24T20:00:00.000Z","slug":"filtering-unions-typescript","author":{"name":"Jithya Nanayakkara"},"content":"\nLet's say I have the following Union:\n\n```typescript\ntype Cake =\n    | { name: \"Nutella cheesecake\"; sugarLevel: \"low\" }\n    | { name: \"Fairy cupcake\"; sugarLevel: \"medium\" }\n    | { name: \"Strawberry shortcake\"; sugarLevel: \"high\" }\n    | { name: \"Rainbow cake\"; sugarLevel: \"high\" };\n```\n\nWhat if I want a new type, which is a union of all the names of cakes with a `sugarLevel` of `\"high\"`?\n\n```typescript\ntype Breakfast = \"Strawberry shortcake\" | \"Rainbow cake\";\n```\n\nWithout having to manually type out all the names which fit the criteria, we can achieve this instead by extracting the values from the `Cake` type:\n\n```typescript\ntype Breakfast = {\n    [CakeDescription in Cake as CakeDescription[\"name\"]]: CakeDescription[\"sugarLevel\"] extends \"high\"\n        ? CakeDescription[\"name\"]\n        : never;\n}[Cake[\"name\"]];\n\n// gives Breakfast = \"Strawberry shortcake\" | \"Rainbow cake\"\n```\n\nLet's breakdown what happens:\n\n1. First we need to create a new (temporary) object - that's why the type opens with a `{`. This object is mapping of `Cake[\"name\"]: Cake[\"name\"] | never`. **Note:** `Cake[\"name\"]` gives `\"Nutella cheesecake\" | \"Fairy cupcake\" | \"Strawberry shortcake\" | \"Rainbow cake\"`\n2. We then need to iterate over every value in the `Cake` union type. This is done using the `[value in union]` syntax.\n3. Every value we iterate over needs to be converted into a string, by indexing into the Cake object's `\"name\"` property. This is done using the `as` syntax.\n4. The previous step essentially created the key of the new object, now we need to associate it with a value. We still have access to the `Cake` value (I've named it `CakeDescription`) we're iterating over, so we check whether the `\"sugarLevel\"` equals `\"high\"` via the `extends` keyword.\n5. If it does equal `\"high\"` we return the name of the Cake, if not we return `never`.\n6. At the closing `}`, a new object type is created. We can extract all its values by passing a union of all its keys as the index - we already know the keys, as it's just `Cake[\"name\"]`. Which is why it ends with `}[Cake[\"name\"]];`\n"},"estimatedReadingTime":{"minutes":3,"words":336,"text":"3 min read"},"headings":[]},"__N_SSG":true},"page":"/posts/[slug]","query":{"slug":"filtering-unions-typescript"},"buildId":"L0pcDSaMYWakbUg_6Ti-7","assetPrefix":"/blog","runtimeConfig":{"basePath":"/blog"},"isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>