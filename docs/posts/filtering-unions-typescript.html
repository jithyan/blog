<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><link rel="preconnect" href="https://fonts.googleapis.com"/><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="true"/><link rel="apple-touch-icon" sizes="180x180" href="/favicon/apple-touch-icon.png"/><link rel="icon" type="image/png" sizes="32x32" href="/favicon/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/favicon/favicon-16x16.png"/><link rel="manifest" href="/favicon/site.webmanifest"/><link rel="mask-icon" href="/favicon/safari-pinned-tab.svg" color="#000000"/><link rel="shortcut icon" href="/favicon/favicon.ico"/><meta name="msapplication-TileColor" content="#000000"/><meta name="msapplication-config" content="/favicon/browserconfig.xml"/><meta name="theme-color" content="#000"/><link rel="alternate" type="application/rss+xml" href="/feed.xml"/><meta name="description" content="A blog on web development with React and Typescript."/><title>Filtering Unions in TypeScript</title><meta name="next-head-count" content="16"/><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin /><link rel="preload" href="/blog/_next/static/css/f2e8ce7a08454583.css" as="style"/><link rel="stylesheet" href="/blog/_next/static/css/f2e8ce7a08454583.css" data-n-g=""/><link rel="preload" href="/blog/_next/static/css/ff77306449b1897a.css" as="style"/><link rel="stylesheet" href="/blog/_next/static/css/ff77306449b1897a.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/blog/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/blog/_next/static/chunks/webpack-5f0cf5446be11543.js" defer=""></script><script src="/blog/_next/static/chunks/framework-ed62687b5581921b.js" defer=""></script><script src="/blog/_next/static/chunks/main-cb7b41c9cdc2a097.js" defer=""></script><script src="/blog/_next/static/chunks/pages/_app-f51201e12e7e4d94.js" defer=""></script><script src="/blog/_next/static/chunks/299-6b06e3596b88e631.js" defer=""></script><script src="/blog/_next/static/chunks/503-5f0d2c6f9d0a5f52.js" defer=""></script><script src="/blog/_next/static/chunks/pages/posts/%5Bslug%5D-4f495f5866c95a35.js" defer=""></script><script src="/blog/_next/static/mTzgGydk06PcoobBr3rCg/_buildManifest.js" defer=""></script><script src="/blog/_next/static/mTzgGydk06PcoobBr3rCg/_ssgManifest.js" defer=""></script><style data-href="https://fonts.googleapis.com/css2?family=Inter">@font-face{font-family:'Inter';font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/inter/v12/UcCO3FwrK3iLTeHuS_fvQtMwCp50KnMw2boKoduKmMEVuLyfMZs.woff) format('woff')}@font-face{font-family:'Inter';font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/inter/v12/UcCO3FwrK3iLTeHuS_fvQtMwCp50KnMw2boKoduKmMEVuLyfAZJhjp-Ek-_EeAmM.woff) format('woff');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Inter';font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/inter/v12/UcCO3FwrK3iLTeHuS_fvQtMwCp50KnMw2boKoduKmMEVuLyfAZthjp-Ek-_EeAmM.woff) format('woff');unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Inter';font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/inter/v12/UcCO3FwrK3iLTeHuS_fvQtMwCp50KnMw2boKoduKmMEVuLyfAZNhjp-Ek-_EeAmM.woff) format('woff');unicode-range:U+1F00-1FFF}@font-face{font-family:'Inter';font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/inter/v12/UcCO3FwrK3iLTeHuS_fvQtMwCp50KnMw2boKoduKmMEVuLyfAZxhjp-Ek-_EeAmM.woff) format('woff');unicode-range:U+0370-03FF}@font-face{font-family:'Inter';font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/inter/v12/UcCO3FwrK3iLTeHuS_fvQtMwCp50KnMw2boKoduKmMEVuLyfAZBhjp-Ek-_EeAmM.woff) format('woff');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Inter';font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/inter/v12/UcCO3FwrK3iLTeHuS_fvQtMwCp50KnMw2boKoduKmMEVuLyfAZFhjp-Ek-_EeAmM.woff) format('woff');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Inter';font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/inter/v12/UcCO3FwrK3iLTeHuS_fvQtMwCp50KnMw2boKoduKmMEVuLyfAZ9hjp-Ek-_EeA.woff) format('woff');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}</style></head><body><div id="__next"><div class="bg-gray-900"><div class="min-h-screen"><main><div class="container mx-auto px-5"><h2 class="text-lg md:text-xl font-bold underline text-teal-500 mb-20 pt-8"><a class="hover:text-sky-400" href="/blog">Home</a></h2><article id="blog-post" class="mb-32"><div class="max-w-2xl mx-auto"><h1 class="text-pink-500 font-bold text-center text-6xl tracking-tighter leading-tight mx-auto md:text-left">Filtering Unions in TypeScript</h1><div class="mt-2 mb-6 text-lg text-white font-semibold"><div class="mb-1"><time dateTime="2023-03-18T20:00:00.000Z">March	19, 2023</time> |<!-- --> <span>Jithya Nanayakkara</span> |<!-- --> <span>6 min read</span></div><div><a class="text-base text-teal-500 underline hover:text-sky-400" href="#inject-comments-for-uterances">Jump to comments</a></div></div></div><div class="max-w-2xl mx-auto text-gray-300"><div class="markdown-styles_markdown__8Ahqd"><p>Let&#x27;s say I have the following Union:</p>
<pre><div style="color:#d4d4d4;font-size:13px;text-shadow:none;font-family:Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;background:#1e1e1e"><code class="language-typescript" style="color:#9cdcfe;font-size:13px;text-shadow:none;font-family:Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none">type Cake =
    | { name: &quot;Nutella cheesecake&quot;; sugarLevel: &quot;low&quot; }
    | { name: &quot;Fairy cupcake&quot;; sugarLevel: &quot;medium&quot; }
    | { name: &quot;Strawberry shortcake&quot;; sugarLevel: &quot;high&quot; }
    | { name: &quot;Rainbow cake&quot;; sugarLevel: &quot;high&quot; };</code></div></pre>
<p>What if I want a new type, <code class="bg-slate-800 px-2">Breakfast</code>, which is a union of all the names of cakes with a <code class="bg-slate-800 px-2">sugarLevel</code> of <code class="bg-slate-800 px-2">&quot;high&quot;</code>?</p>
<pre><div style="color:#d4d4d4;font-size:13px;text-shadow:none;font-family:Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;background:#1e1e1e"><code class="language-typescript" style="color:#9cdcfe;font-size:13px;text-shadow:none;font-family:Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none">type Breakfast = &quot;Strawberry shortcake&quot; | &quot;Rainbow cake&quot;;</code></div></pre>
<p>Without having to manually type out all the names which fit the criteria, we can achieve this by extracting the values from the <code class="bg-slate-800 px-2">Cake</code> type:</p>
<pre><div style="color:#d4d4d4;font-size:13px;text-shadow:none;font-family:Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;background:#1e1e1e"><code class="language-typescript" style="color:#9cdcfe;font-size:13px;text-shadow:none;font-family:Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none">type Breakfast = {
    [CakeDescription in Cake as CakeDescription[&quot;name&quot;]]: CakeDescription[&quot;sugarLevel&quot;] extends &quot;high&quot;
        ? CakeDescription[&quot;name&quot;]
        : never;
}[Cake[&quot;name&quot;]];

// gives Breakfast = &quot;Strawberry shortcake&quot; | &quot;Rainbow cake&quot;</code></div></pre>
<p>That bit of Typescript looks intimidating, so let&#x27;s breakdown what happens:</p>
<ol>
<li>We first want to extract all the <em>names</em> of <code class="bg-slate-800 px-2">Cake</code>. As every object in the <code class="bg-slate-800 px-2">Cake</code> union has a <code class="bg-slate-800 px-2">name</code> property, we can get a union of all the names using <code class="bg-slate-800 px-2">Cake[&#x27;name&#x27;]</code>.</li>
<li>We need to iterate over all the <code class="bg-slate-800 px-2">Cake</code> objects. The only way I know of achieving this is by creating a new object and using the <code class="bg-slate-800 px-2">in</code> operator. A simple example of this is:</li>
</ol>
<pre><div style="color:#d4d4d4;font-size:13px;text-shadow:none;font-family:Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;background:#1e1e1e"><code class="language-typescript" style="color:#9cdcfe;font-size:13px;text-shadow:none;font-family:Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none">type PersonFields = &quot;name&quot; | &quot;age&quot; | &quot;birthday&quot;;

type Person = {
    [Field in PersonFields]: string;
};</code></div></pre>
<p><code class="bg-slate-800 px-2">Person</code> above is equivalent to:</p>
<pre><div style="color:#d4d4d4;font-size:13px;text-shadow:none;font-family:Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;background:#1e1e1e"><code class="language-typescript" style="color:#9cdcfe;font-size:13px;text-shadow:none;font-family:Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none">type Person = { name: string; age: string; birthday: string };
// this can also be written as Record&lt;&quot;name&quot;|&quot;age&quot;|&quot;birthday&quot;, string&gt;</code></div></pre>
<ol start="3">
<li>If we try to do the same thing with <code class="bg-slate-800 px-2">Cake</code>, we come to a problem:</li>
</ol>
<pre><div style="color:#d4d4d4;font-size:13px;text-shadow:none;font-family:Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;background:#1e1e1e"><code class="language-typescript" style="color:#9cdcfe;font-size:13px;text-shadow:none;font-family:Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none">// this will not work!
type CakeObject = {
    [CakeDescription in Cake]: string;
};</code></div></pre>
<blockquote>
<p>Type &#x27;Cake&#x27; is not assignable to type &#x27;string | number | symbol&#x27;.</p>
</blockquote>
<p>The reason you get an error, is that <code class="bg-slate-800 px-2">CakeDescription</code> is an object of type <code class="bg-slate-800 px-2">Cake</code>, and properties of objects need to be either strings, numbers or Symbols.</p>
<p>This is where the <code class="bg-slate-800 px-2">as</code> operator comes into play. We use it do some transformation of the current value (i.e. <code class="bg-slate-800 px-2">CakeDescription</code>) in the interation:</p>
<pre><div style="color:#d4d4d4;font-size:13px;text-shadow:none;font-family:Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;background:#1e1e1e"><code class="language-typescript" style="color:#9cdcfe;font-size:13px;text-shadow:none;font-family:Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none">type CakeObject = {
    [CakeDescription in Cake as CakeDescription[&quot;name&quot;]]: string;
};</code></div></pre>
<p>We simply accessed the <code class="bg-slate-800 px-2">name</code> property in <code class="bg-slate-800 px-2">CakeDescription</code>. This results in the equivalent type:</p>
<pre><div style="color:#d4d4d4;font-size:13px;text-shadow:none;font-family:Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;background:#1e1e1e"><code class="language-typescript" style="color:#9cdcfe;font-size:13px;text-shadow:none;font-family:Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none">type CakeObject = Record&lt;
    | &quot;Strawberry shortcake&quot;
    | &quot;Rainbow cake&quot;
    | &quot;Nutella cheesecake&quot;
    | &quot;Fairy cupcake&quot;,
    string
&gt;;</code></div></pre>
<ol start="4">
<li>So far, every field in <code class="bg-slate-800 px-2">CakeObject</code> has a value type of <code class="bg-slate-800 px-2">string</code>. We need this to be the actual name of the cake we&#x27;re currently iterating over. This can be done easily enough, as the value portion (the part after <code class="bg-slate-800 px-2">:</code>) still has access to <code class="bg-slate-800 px-2">CakeDescription</code>:</li>
</ol>
<pre><div style="color:#d4d4d4;font-size:13px;text-shadow:none;font-family:Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;background:#1e1e1e"><code class="language-typescript" style="color:#9cdcfe;font-size:13px;text-shadow:none;font-family:Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none">type CakeObject = {
    [CakeDescription in Cake as CakeDescription[&quot;name&quot;]]: CakeDescription[&quot;name&quot;];
};</code></div></pre>
<p>Which is equivalent to:</p>
<pre><div style="color:#d4d4d4;font-size:13px;text-shadow:none;font-family:Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;background:#1e1e1e"><code class="language-typescript" style="color:#9cdcfe;font-size:13px;text-shadow:none;font-family:Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none">type CakeObject = {
    &quot;Strawberry shortcake&quot;: &quot;Strawberry shortcake&quot;;
    &quot;Rainbow cake&quot;: &quot;Rainbow cake&quot;;
    &quot;Nutella cheesecake&quot;: &quot;Nutella cheesecake&quot;;
    &quot;Fairy cupcake&quot;: &quot;Fairy cupcake&quot;;
};</code></div></pre>
<ol start="5">
<li>However, we are only interested in <code class="bg-slate-800 px-2">Cake</code>s with a <code class="bg-slate-800 px-2">sugarLevel</code> of <code class="bg-slate-800 px-2">&quot;high&quot;</code>. We introduce a condition using the <code class="bg-slate-800 px-2">extends</code> operator, and return the name of the cake only if its <code class="bg-slate-800 px-2">sugarLevel</code> is <code class="bg-slate-800 px-2">&quot;high&quot;</code>, and <code class="bg-slate-800 px-2">never</code> if it isn&#x27;t:</li>
</ol>
<pre><div style="color:#d4d4d4;font-size:13px;text-shadow:none;font-family:Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;background:#1e1e1e"><code class="language-typescript" style="color:#9cdcfe;font-size:13px;text-shadow:none;font-family:Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none">type CakeObject = {
    [CakeDescription in Cake as CakeDescription[&quot;name&quot;]]: CakeDescription[&quot;sugarLevel&quot;] extends &quot;high&quot;
        ? CakeDescription[&quot;name&quot;]
        : never;
};</code></div></pre>
<p>Which is equivalent to:</p>
<pre><div style="color:#d4d4d4;font-size:13px;text-shadow:none;font-family:Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;background:#1e1e1e"><code class="language-typescript" style="color:#9cdcfe;font-size:13px;text-shadow:none;font-family:Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none">type CakeObject = {
    &quot;Strawberry shortcake&quot;: &quot;Strawberry shortcake&quot;;
    &quot;Rainbow cake&quot;: &quot;Rainbow cake&quot;;
    &quot;Nutella cheesecake&quot;: never;
    &quot;Fairy cupcake&quot;: never;
};</code></div></pre>
<p><code class="bg-slate-800 px-2">never</code> is kind of like the opposite of <code class="bg-slate-800 px-2">any</code>. It represents impossible types and Typescript doesn&#x27;t allow you to perform any operation on them.</p>
<ol start="6">
<li>The final step is to get all the values of <code class="bg-slate-800 px-2">CakeObject</code>. We can do this by passing in the union of all its keys as the index:</li>
</ol>
<pre><div style="color:#d4d4d4;font-size:13px;text-shadow:none;font-family:Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;background:#1e1e1e"><code class="language-typescript" style="color:#9cdcfe;font-size:13px;text-shadow:none;font-family:Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none">type CakeObject = {
    [CakeDescription in Cake as CakeDescription[&quot;name&quot;]]: CakeDescription[&quot;sugarLevel&quot;] extends &quot;high&quot;
        ? CakeDescription[&quot;name&quot;]
        : never;
};

type Breakfast = CakeObject[keyof CakeObject];</code></div></pre>
<p>All the <code class="bg-slate-800 px-2">never</code> types are removed from the resulting union, giving <code class="bg-slate-800 px-2">&quot;Strawberry shortcake&quot; | &quot;Rainbow cake&quot;</code>!</p>
<p>We could also have written it as:</p>
<pre><div style="color:#d4d4d4;font-size:13px;text-shadow:none;font-family:Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;background:#1e1e1e"><code class="language-typescript" style="color:#9cdcfe;font-size:13px;text-shadow:none;font-family:Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none">type Breakfast = CakeObject[Cake[&quot;name&quot;]];</code></div></pre>
<p>As the keys of <code class="bg-slate-800 px-2">CakeObject</code> are all the <code class="bg-slate-800 px-2">name</code> values of <code class="bg-slate-800 px-2">Cake</code>.</p>
<p>Knowing this, we can achieve extract the new type in one step as:</p>
<pre><div style="color:#d4d4d4;font-size:13px;text-shadow:none;font-family:Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;background:#1e1e1e"><code class="language-typescript" style="color:#9cdcfe;font-size:13px;text-shadow:none;font-family:Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none">type Breakfast = {
    [CakeDescription in Cake as CakeDescription[&quot;name&quot;]]: CakeDescription[&quot;sugarLevel&quot;] extends &quot;high&quot;
        ? CakeDescription[&quot;name&quot;]
        : never;
}[Cake[&quot;name&quot;]];</code></div></pre></div></div><section><div id="inject-comments-for-uterances"></div></section></article></div></main></div><footer class="bg-slate-800"><div style="display:table" class="mx-auto"><ul class="list-none flex flex-row text-lg text-teal-500 underline font-semibold p-2"><li class="mr-4 max-w-md"><a href="https://github.com/jithyan" class="hover:text-sky-400 " target="_blank">Github</a></li><li class="mr-4 max-w-md"><a href="https://www.linkedin.com/in/jithyan/" class=" hover:text-sky-400 " target="_blank">LinkedIn</a></li><li class=""><a href="https://jithyan.github.io/resume/" class=" hover:text-sky-400" target="_blank">Resume</a></li></ul></div></footer></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"title":"Filtering Unions in TypeScript","date":"2023-03-18T20:00:00.000Z","slug":"filtering-unions-typescript","author":{"name":"Jithya Nanayakkara"},"content":"\nLet's say I have the following Union:\n\n```typescript\ntype Cake =\n    | { name: \"Nutella cheesecake\"; sugarLevel: \"low\" }\n    | { name: \"Fairy cupcake\"; sugarLevel: \"medium\" }\n    | { name: \"Strawberry shortcake\"; sugarLevel: \"high\" }\n    | { name: \"Rainbow cake\"; sugarLevel: \"high\" };\n```\n\nWhat if I want a new type, `Breakfast`, which is a union of all the names of cakes with a `sugarLevel` of `\"high\"`?\n\n```typescript\ntype Breakfast = \"Strawberry shortcake\" | \"Rainbow cake\";\n```\n\nWithout having to manually type out all the names which fit the criteria, we can achieve this by extracting the values from the `Cake` type:\n\n```typescript\ntype Breakfast = {\n    [CakeDescription in Cake as CakeDescription[\"name\"]]: CakeDescription[\"sugarLevel\"] extends \"high\"\n        ? CakeDescription[\"name\"]\n        : never;\n}[Cake[\"name\"]];\n\n// gives Breakfast = \"Strawberry shortcake\" | \"Rainbow cake\"\n```\n\nThat bit of Typescript looks intimidating, so let's breakdown what happens:\n\n1. We first want to extract all the _names_ of `Cake`. As every object in the `Cake` union has a `name` property, we can get a union of all the names using `Cake['name']`.\n2. We need to iterate over all the `Cake` objects. The only way I know of achieving this is by creating a new object and using the `in` operator. A simple example of this is:\n\n```typescript\ntype PersonFields = \"name\" | \"age\" | \"birthday\";\n\ntype Person = {\n    [Field in PersonFields]: string;\n};\n```\n\n`Person` above is equivalent to:\n\n```typescript\ntype Person = { name: string; age: string; birthday: string };\n// this can also be written as Record\u003c\"name\"|\"age\"|\"birthday\", string\u003e\n```\n\n3. If we try to do the same thing with `Cake`, we come to a problem:\n\n```typescript\n// this will not work!\ntype CakeObject = {\n    [CakeDescription in Cake]: string;\n};\n```\n\n\u003e Type 'Cake' is not assignable to type 'string | number | symbol'.\n\nThe reason you get an error, is that `CakeDescription` is an object of type `Cake`, and properties of objects need to be either strings, numbers or Symbols.\n\nThis is where the `as` operator comes into play. We use it do some transformation of the current value (i.e. `CakeDescription`) in the interation:\n\n```typescript\ntype CakeObject = {\n    [CakeDescription in Cake as CakeDescription[\"name\"]]: string;\n};\n```\n\nWe simply accessed the `name` property in `CakeDescription`. This results in the equivalent type:\n\n```typescript\ntype CakeObject = Record\u003c\n    | \"Strawberry shortcake\"\n    | \"Rainbow cake\"\n    | \"Nutella cheesecake\"\n    | \"Fairy cupcake\",\n    string\n\u003e;\n```\n\n4. So far, every field in `CakeObject` has a value type of `string`. We need this to be the actual name of the cake we're currently iterating over. This can be done easily enough, as the value portion (the part after `:`) still has access to `CakeDescription`:\n\n```typescript\ntype CakeObject = {\n    [CakeDescription in Cake as CakeDescription[\"name\"]]: CakeDescription[\"name\"];\n};\n```\n\nWhich is equivalent to:\n\n```typescript\ntype CakeObject = {\n    \"Strawberry shortcake\": \"Strawberry shortcake\";\n    \"Rainbow cake\": \"Rainbow cake\";\n    \"Nutella cheesecake\": \"Nutella cheesecake\";\n    \"Fairy cupcake\": \"Fairy cupcake\";\n};\n```\n\n5. However, we are only interested in `Cake`s with a `sugarLevel` of `\"high\"`. We introduce a condition using the `extends` operator, and return the name of the cake only if its `sugarLevel` is `\"high\"`, and `never` if it isn't:\n\n```typescript\ntype CakeObject = {\n    [CakeDescription in Cake as CakeDescription[\"name\"]]: CakeDescription[\"sugarLevel\"] extends \"high\"\n        ? CakeDescription[\"name\"]\n        : never;\n};\n```\n\nWhich is equivalent to:\n\n```typescript\ntype CakeObject = {\n    \"Strawberry shortcake\": \"Strawberry shortcake\";\n    \"Rainbow cake\": \"Rainbow cake\";\n    \"Nutella cheesecake\": never;\n    \"Fairy cupcake\": never;\n};\n```\n\n`never` is kind of like the opposite of `any`. It represents impossible types and Typescript doesn't allow you to perform any operation on them.\n\n6. The final step is to get all the values of `CakeObject`. We can do this by passing in the union of all its keys as the index:\n\n```typescript\ntype CakeObject = {\n    [CakeDescription in Cake as CakeDescription[\"name\"]]: CakeDescription[\"sugarLevel\"] extends \"high\"\n        ? CakeDescription[\"name\"]\n        : never;\n};\n\ntype Breakfast = CakeObject[keyof CakeObject];\n```\n\nAll the `never` types are removed from the resulting union, giving `\"Strawberry shortcake\" | \"Rainbow cake\"`!\n\nWe could also have written it as:\n\n```typescript\ntype Breakfast = CakeObject[Cake[\"name\"]];\n```\n\nAs the keys of `CakeObject` are all the `name` values of `Cake`.\n\nKnowing this, we can achieve extract the new type in one step as:\n\n```typescript\ntype Breakfast = {\n    [CakeDescription in Cake as CakeDescription[\"name\"]]: CakeDescription[\"sugarLevel\"] extends \"high\"\n        ? CakeDescription[\"name\"]\n        : never;\n}[Cake[\"name\"]];\n```\n"},"estimatedReadingTime":{"minutes":6,"words":689,"text":"6 min read"},"headings":[]},"__N_SSG":true},"page":"/posts/[slug]","query":{"slug":"filtering-unions-typescript"},"buildId":"mTzgGydk06PcoobBr3rCg","assetPrefix":"/blog","runtimeConfig":{"basePath":"/blog"},"isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>